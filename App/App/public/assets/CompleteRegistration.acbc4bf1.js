import{_ as c,m as a,as as f,p as y,S as w,f as s,s as i,F as V,V as _,a4 as Q,R as m,aV as n,a8 as g,bc as S,bd as C,a9 as u,a2 as I,X as q,ap as b,bB as k}from"./index.30bcee2d.js";import{Q as v}from"./QToolbar.8b90f7d3.js";import{Q as x}from"./QHeader.b4bada8e.js";import{Q as F}from"./QInnerLoading.1dad5a80.js";import{Q as T}from"./QImg.4e876ad6.js";import{Q as z}from"./QItemLabel.b935a34d.js";import{Q as U}from"./QSelect.a5140148.js";import{Q as h}from"./QSpace.274cde1f.js";import{Q as P}from"./QForm.ab8a2cd2.js";import{Q as B}from"./QPage.f04658ef.js";import{u as L}from"./ClientStore.5dffc3bb.js";import"./QResizeObserver.3c3b4a7a.js";import"./QChip.9a5e9391.js";import"./QMenu.3f2e45b1.js";import"./selection.c88e3f6c.js";import"./rtl.b51694b1.js";import"./format.2bc25e5f.js";const N={name:"CompleteRegistration",data(){return{loading:!1,field_type:"password",field_type1:"password",first_name:"",last_name:"",email_address:"",password:"",cpassword:"",mobile_number:"",mobile_prefix:"",options:[],inner_loading:!1,client_uuid:""}},setup(){return{ClientStore:L()}},computed:{FieldIcon(){return this.field_type==="password"?"eva-eye-outline":"eva-eye-off-outline"},FieldIcon1(){return this.field_type1==="password"?"eva-eye-outline":"eva-eye-off-outline"}},mounted(){this.client_uuid=this.$route.query.uuid,this.getCustomerInfo()},methods:{getCustomerInfo(){this.inner_loading=!0,a.getCustomerInfo(this.client_uuid).then(o=>{this.first_name=o.details.first_name,this.last_name=o.details.last_name,this.email_address=o.details.email_address,this.mobile_prefix="+"+o.details.default_data.phonecode,Object.keys(o.details.data).length>0&&Object.entries(o.details.data).forEach(([l,r])=>{this.options.push({label:"+"+r.phonecode+" "+r.country_name,value:"+"+r.phonecode,flag:r.flag})})}).catch(o=>{a.notify("red-5",o,"error_outline",this.$q)}).then(o=>{this.inner_loading=!1})},onSubmit(){const o={client_uuid:this.client_uuid,first_name:this.first_name,last_name:this.last_name,password:this.password,cpassword:this.cpassword,mobile_prefix:this.mobile_prefix,mobile_number:this.mobile_number,local_id:a.getStorage("place_id")};this.loading=!0,a.completeSocialSignup(o).then(l=>{f.setUser(l.details.user_data),f.setToken(l.details.user_token),this.ClientStore.user_settings=l.details.user_settings;const r=a.getStorage("place_id");console.debug("=>"+r),typeof r!="undefined"&&r!==null?this.$router.push("/home"):this.$router.push("/location")}).catch(l=>{a.notify("red-5",l,null,this.$q)}).then(l=>{this.loading=!1})}}},R={class:"text-center"},E=m("h5",{class:"text-weight-bold q-mb-lg"},"Fill your information",-1),H={class:"w-75 margin-auto"};function j(o,l,r,A,t,d){return y(),w(V,null,[s(x,{reveal:"","reveal-offset":"50",class:"bg-white"},{default:i(()=>[s(v,null,{default:i(()=>[s(_,{onClick:l[0]||(l[0]=e=>o.$router.back()),flat:"",round:"",dense:"",icon:"arrow_back",class:"q-mr-sm",color:"dark"})]),_:1})]),_:1}),s(B,{padding:""},{default:i(()=>[s(Q,{flat:""},{default:i(()=>[s(F,{showing:t.inner_loading,color:"primary",size:"md"},null,8,["showing"]),m("div",R,[s(P,{onSubmit:d.onSubmit,class:"q-gutter-md"},{default:i(()=>[E,m("div",H,[s(n,{modelValue:t.first_name,"onUpdate:modelValue":l[1]||(l[1]=e=>t.first_name=e),label:o.$t("First name"),"lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},null,8,["modelValue","label","rules"]),s(n,{modelValue:t.last_name,"onUpdate:modelValue":l[2]||(l[2]=e=>t.last_name=e),label:o.$t("Last name"),"lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},null,8,["modelValue","label","rules"]),s(n,{modelValue:t.email_address,"onUpdate:modelValue":l[3]||(l[3]=e=>t.email_address=e),label:"Email address",disable:"","lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},null,8,["modelValue","rules"]),s(n,{modelValue:t.mobile_number,"onUpdate:modelValue":l[5]||(l[5]=e=>t.mobile_number=e),dense:"",mask:"##############","lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},{prepend:i(()=>[s(U,{dense:"",modelValue:t.mobile_prefix,"onUpdate:modelValue":l[4]||(l[4]=e=>t.mobile_prefix=e),options:t.options,onFilter:o.filterFn,behavior:"dialog","input-debounce":"700",style:{border:"none"},"emit-value":"",borderless:""},{option:i(({itemProps:e,opt:p})=>[s(g,S(C(e)),{default:i(()=>[s(u,{avatar:""},{default:i(()=>[s(T,{src:p.flag,style:{height:"15px","max-width":"20px"}},null,8,["src"])]),_:2},1024),s(u,null,{default:i(()=>[s(z,{innerHTML:p.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),"no-option":i(()=>[s(g,null,{default:i(()=>[s(u,{class:"text-grey"},{default:i(()=>[I(q(o.$t("No results")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),_:1},8,["modelValue","rules"]),s(n,{modelValue:t.password,"onUpdate:modelValue":l[7]||(l[7]=e=>t.password=e),type:t.field_type,label:o.$t("Password"),"lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},{append:i(()=>[s(b,{onClick:l[6]||(l[6]=e=>t.field_type=t.field_type=="password"?"text":"password"),name:d.FieldIcon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","rules"]),s(n,{type:t.field_type1,modelValue:t.cpassword,"onUpdate:modelValue":l[9]||(l[9]=e=>t.cpassword=e),label:o.$t("Confirm Password"),"lazy-rules":"",rules:[e=>e&&e.length>0||"This field is required"]},{append:i(()=>[s(b,{onClick:l[8]||(l[8]=e=>t.field_type1=t.field_type1=="password"?"text":"password"),name:d.FieldIcon1,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["type","modelValue","label","rules"]),s(h,{class:"q-pa-md"}),s(k,{vertical:"",align:"center"},{default:i(()=>[s(_,{loading:t.loading,type:"submit",label:o.$t("Submit"),unelevated:"",color:"primary","text-color":"white",class:"full-width text-weight-bold",size:"lg"},null,8,["loading","label"])]),_:1}),s(h,{class:"q-pa-md"})])]),_:1},8,["onSubmit"])])]),_:1})]),_:1})],64)}var re=c(N,[["render",j]]);export{re as default};
