import{_ as F,l as g,P,m as b,n as p,p as a,S as u,f as e,s,a3 as w,q as f,aw as S,F as h,V as C,a2 as y,X as c,R as n,aV as L,ap as q,U as I,t as k,a8 as v,a9 as x}from"./index.30bcee2d.js";import{Q as T}from"./QToolbarTitle.80059bbe.js";import{Q as E}from"./QToolbar.8b90f7d3.js";import{Q as R}from"./QHeader.b4bada8e.js";import{Q}from"./QList.d8ad41f7.js";import{Q as _}from"./QSkeleton.8077f081.js";import{Q as B}from"./QImg.4e876ad6.js";import{Q as N}from"./QPage.f04658ef.js";import{Q as M}from"./QFooter.f2cd3c2a.js";import{u as O}from"./MenuStore.d5ae1ce3.js";import{u as z}from"./CartStore.fe06611f.js";import"./QResizeObserver.3c3b4a7a.js";const j={name:"SearchItems",components:{SearchListFood:g(()=>k(()=>import("./SearchListFood.1d574364.js"),["assets/SearchListFood.1d574364.js","assets/QImg.4e876ad6.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QChip.9a5e9391.js","assets/QItemLabel.b935a34d.js"])),ItemDetails:g(()=>k(()=>import("./ItemDetails.0c7285b6.js"),["assets/ItemDetails.0c7285b6.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QCircularProgress.f57ffd5b.js","assets/format.2bc25e5f.js","assets/QImg.4e876ad6.js","assets/QChip.9a5e9391.js","assets/QBtnToggle.c946cab5.js","assets/QBtnGroup.d73b976b.js","assets/QSelect.a5140148.js","assets/QItemLabel.b935a34d.js","assets/QMenu.3f2e45b1.js","assets/selection.c88e3f6c.js","assets/rtl.b51694b1.js","assets/QSpace.274cde1f.js","assets/CartStore.fe06611f.js","assets/FavoriteStore.20024f5d.js","assets/DeliverySched.7aa22819.js"])),ItemDetailsCheckbox:g(()=>k(()=>import("./ItemDetailsCheckbox.764a5a53.js"),["assets/ItemDetailsCheckbox.764a5a53.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QCircularProgress.f57ffd5b.js","assets/format.2bc25e5f.js","assets/QImg.4e876ad6.js","assets/QItemLabel.b935a34d.js","assets/QList.d8ad41f7.js","assets/QSelect.a5140148.js","assets/QChip.9a5e9391.js","assets/QMenu.3f2e45b1.js","assets/selection.c88e3f6c.js","assets/rtl.b51694b1.js","assets/QSpace.274cde1f.js","assets/QBtnGroup.d73b976b.js","assets/ClosePopup.da855ff7.js","assets/CartStore.fe06611f.js","assets/FavoriteStore.20024f5d.js","assets/DeliverySched.7aa22819.js"]))},data(){return{slug:"",q:"",food_list:[],awaitingSearch:!1,item_added:!1}},setup(){const t=O(),r=z(),m=P();return{MenuStore:t,CartStore:r,DataStore:m}},created(){this.slug=this.$route.query.slug},watch:{q(t,r){if(!this.awaitingSearch){if(typeof this.q=="undefined"||this.q===null||this.q===""||this.q==="null"||this.q==="undefined")return!1;setTimeout(()=>{b.fetchDataPost("searchItems","q="+this.q+"&slug="+this.slug).then(m=>{console.debug(m),this.food_list=m.details.data}).catch(m=>{this.food_list=[]}).then(m=>{this.awaitingSearch=!1})},1e3)}this.awaitingSearch=!0}},computed:{hasFilter(){return!b.empty(this.q)},hasResults(){return Object.keys(this.food_list).length>0}},methods:{onClickitem(t){this.item_added=!1;const r={cat_id:t.cat_id,item_uuid:t.item_uuid};this.DataStore.addons_use_checkbox?this.$refs.refItem2.showItem2(r,this.slug):this.$refs.refItem.showItem2(r,this.slug)},afterAdditems(){this.item_added=!0,this.CartStore.getCart(!1,this.CartStore.cart_payload)}}},U={class:"col-12"},H={key:2,class:"flex flex-center",style:{"min-height":"89%"}},X={class:"text-center full-width"},G={class:"text-h5 text-weight-bold"},J={class:"text-grey font12"},K={class:"text-h5 text-weight-bold"},W={class:"text-grey font12"},Y={class:"row items-center justify-between fit"},Z={class:"text-weight-bold font17"},$={class:"text-weight-bold font16"};function ee(t,r,m,l,o,d){const A=p("SearchListFood"),D=p("ItemDetails"),V=p("ItemDetailsCheckbox");return a(),u(h,null,[e(R,{reveal:"","reveal-offset":"10",class:w({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-black":!t.$q.dark.mode})},{default:s(()=>[e(E,null,{default:s(()=>[e(C,{onClick:r[0]||(r[0]=i=>t.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:t.$q.dark.mode?"white":"dark"},null,8,["color"]),e(T,{class:"text-weight-bold"},{default:s(()=>[y(c(t.$t("Search menu items")),1)]),_:1})]),_:1})]),_:1},8,["class"]),e(N,{class:"q-pl-md q-pr-md row items-stretch"},{default:s(()=>[n("div",U,[e(L,{modelValue:o.q,"onUpdate:modelValue":r[2]||(r[2]=i=>o.q=i),label:t.$t("Search"),outlined:"","lazy-rules":"","bg-color":t.$q.dark.mode?"grey600":"input","label-color":"grey",borderless:"",class:"input-borderless"},{prepend:s(()=>[e(q,{name:"eva-search-outline",size:"sm"})]),append:s(()=>[d.hasFilter?(a(),f(q,{key:0,class:"cursor-pointer",name:"close",color:"grey",onClick:r[1]||(r[1]=i=>this.q="")})):S("",!0)]),_:1},8,["modelValue","label","bg-color"]),d.hasResults&&d.hasFilter&&!o.awaitingSearch?(a(),f(Q,{key:0,separator:""},{default:s(()=>[(a(!0),u(h,null,I(o.food_list,i=>(a(),f(v,{key:i,onClick:te=>d.onClickitem(i),clickable:""},{default:s(()=>[e(A,{items:i,merchant_list:t.merchant_list},null,8,["items","merchant_list"])]),_:2},1032,["onClick"]))),128))]),_:1})):d.hasFilter&&o.awaitingSearch?(a(),f(Q,{key:1},{default:s(()=>[(a(),u(h,null,I(8,i=>e(v,{key:i},{default:s(()=>[e(x,{avatar:""},{default:s(()=>[e(_,{width:"80px",height:"80px"})]),_:1}),e(x,null,{default:s(()=>[e(_,{type:"text"}),e(_,{type:"text",class:"w-50"}),e(_,{type:"text",class:"w-70"}),e(_,{type:"text",class:"w-25"})]),_:1})]),_:2},1024)),64))]),_:1})):(a(),u("div",H,[n("div",X,[d.hasFilter&&!o.awaitingSearch?(a(),u(h,{key:0},[n("div",G,c(t.$t("No items found")),1),n("p",J,c(t.$t("Sorry, we couldn't find any results")),1)],64)):(a(),u(h,{key:1},[e(B,{src:"search.png",fit:"fill","spinner-color":"primary",style:{height:"80px","max-width":"80px"}}),n("div",K,c(t.$t("Search Items")),1),n("p",W,[y(c(t.$t("Search items from"))+" ",1),l.MenuStore.data_info[o.slug]?(a(),u(h,{key:0},[y(c(l.MenuStore.data_info[o.slug].restaurant_name),1)],64)):S("",!0)])],64))])]))]),e(D,{ref:"refItem",slug:o.slug,onAfterAdditems:d.afterAdditems},null,8,["slug","onAfterAdditems"]),e(V,{ref:"refItem2",slug:o.slug,onAfterAdditems:d.afterAdditems},null,8,["slug","onAfterAdditems"])]),_:1}),l.CartStore.items_count>0&&o.item_added==!0?(a(),f(M,{key:0,reveal:"",class:w(["q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark",{"bg-primary":!l.CartStore.cart_reloading,"bg-grey-5":l.CartStore.cart_reloading}])},{default:s(()=>[e(C,{to:"/checkout",loading:l.CartStore.cart_loading,disable:!l.CartStore.canProceed,unelevated:"","text-color":"white","no-caps":"",class:"radius10 fit",color:{primary:!l.CartStore.cart_reloading,"grey-5":l.CartStore.cart_reloading}},{default:s(()=>[n("div",Y,[n("div",Z,c(t.$t("Checkout")),1),n("div",$,c(l.CartStore.cart_subtotal.value),1)])]),_:1},8,["loading","disable","color"])]),_:1},8,["class"])):S("",!0)],64)}var fe=F(j,[["render",ee]]);export{fe as default};
