import{_ as q,l as C,m as _,n as Q,p as t,S as i,f as a,s,q as p,aw as c,F as d,V as y,aV as v,b5 as x,ap as S,X as o,R as m,U as I,aa as A,a2 as f,t as V,a6 as F,a7 as D,a8 as P,a9 as k,a$ as z}from"./index.30bcee2d.js";import{Q as B}from"./QToolbar.8b90f7d3.js";import{Q as M}from"./QHeader.b4bada8e.js";import{Q as N}from"./QSpace.274cde1f.js";import{Q as L}from"./QImg.4e876ad6.js";import{Q as w}from"./QItemLabel.b935a34d.js";import{Q as O}from"./QList.d8ad41f7.js";import{Q as T}from"./QPage.f04658ef.js";import{Q as E}from"./QFooter.f2cd3c2a.js";import{u as R}from"./CartStore.fe06611f.js";import"./QResizeObserver.3c3b4a7a.js";const j={name:"MenuSearchPage",data(){return{q:"",data:[],slug:"",loading:!1,awaitingSearch:!1,money_config:[]}},setup(){return{CartStore:R()}},components:{ItemDetails:C(()=>V(()=>import("./ItemDetails.0c7285b6.js"),["assets/ItemDetails.0c7285b6.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QCircularProgress.f57ffd5b.js","assets/format.2bc25e5f.js","assets/QImg.4e876ad6.js","assets/QChip.9a5e9391.js","assets/QBtnToggle.c946cab5.js","assets/QBtnGroup.d73b976b.js","assets/QSelect.a5140148.js","assets/QItemLabel.b935a34d.js","assets/QMenu.3f2e45b1.js","assets/selection.c88e3f6c.js","assets/rtl.b51694b1.js","assets/QSpace.274cde1f.js","assets/CartStore.fe06611f.js","assets/FavoriteStore.20024f5d.js","assets/DeliverySched.7aa22819.js"]))},mounted(){this.slug=this.$route.params.slug,this.Focus(),this.getMoneyConfig()},computed:{totalFound(){return Object.keys(this.data).length},hasData(){return Object.keys(this.data).length>0},isSearch(){return!_.empty(this.q)}},watch:{q(e,l){if(!this.awaitingSearch){if(typeof this.q=="undefined"||this.q===null||this.q===""||this.q==="null"||this.q==="undefined")return this.data=[],!1;setTimeout(()=>{_.menuSearch(this.q,this.slug).then(g=>{this.data=g.details.data}).catch(g=>{this.data=[]}).then(g=>{this.awaitingSearch=!1})},1e3)}this.awaitingSearch=!0}},methods:{Focus(){this.$refs.items.focus()},clearField(){this.q="",this.Focus()},onSearch(e){this.loading=e},onClickitem(e){const l={cat_id:e.cat_id,item_uuid:e.item_uuid};console.debug(e),this.$refs.item_details.showItem2(l,this.slug)},afterAdditems(){console.debug("afterAdditems"),this.CartStore.getCartCount()},getMoneyConfig(){_.getMoneyConfig().then(e=>{this.money_config=e.details}).catch(e=>{}).then(e=>{})}}},U={key:0,class:"q-pa-md"},H={key:0,class:"no-margin text-weight-bold q-pb-sm"},X={class:"no-margin text-weight-bold"},G={class:"text-grey font13"},J={key:0,class:"q-mr-sm"},K={key:1,class:"q-mr-sm"},W={class:"row full-width items-center"},Y={class:"col text-left"},Z=m("div",{class:"col text-weight-600"},"View Order",-1),$={class:"col text-right text-weight-bold"};function ee(e,l,g,h,n,u){const b=Q("ItemDetails");return t(),i(d,null,[a(M,null,{default:s(()=>[a(B,{class:"bg-white text-dark"},{default:s(()=>[a(y,{onClick:l[0]||(l[0]=r=>e.$router.back()),color:"white",rounded:"",unelevated:"","text-color":"dark",icon:"arrow_back",dense:"","no-caps":""}),a(v,{modelValue:n.q,"onUpdate:modelValue":l[2]||(l[2]=r=>n.q=r),ref:"items",label:e.$t("Search menu"),dense:"",outlined:"",color:"grey","bg-color":"white",class:"full-width input-borderless",loading:n.awaitingSearch},x({prepend:s(()=>[a(S,{name:"search"})]),_:2},[n.awaitingSearch?void 0:{name:"append",fn:s(()=>[u.isSearch?(t(),p(S,{key:0,onClick:l[1]||(l[1]=r=>u.clearField()),class:"cursor-pointer",name:"close"})):c("",!0)]),key:"0"}]),1032,["modelValue","label","loading"])]),_:1})]),_:1}),a(T,null,{default:s(()=>[a(N,{class:"q-pa-xs bg-grey-2"}),n.awaitingSearch?c("",!0):(t(),i(d,{key:0},[u.isSearch?(t(),i("div",U,[u.hasData?(t(),i("h5",H,o(e.$t("Search results for"))+" \u201C"+o(n.q)+"\u201D ("+o(u.totalFound)+") ",1)):(t(),i(d,{key:1},[m("h5",X,o(e.$t("No results for"))+" \u201C"+o(n.q)+"\u201D ",1),m("p",G,o(e.$t("Sorry, no product matched for your search. Please try again.")),1)],64))])):c("",!0)],64)),n.awaitingSearch?c("",!0):(t(),p(O,{key:1},{default:s(()=>[(t(!0),i(d,null,I(n.data,r=>(t(),i(d,{key:r},[F((t(),p(P,{clickable:"",onClick:te=>u.onClickitem(r)},{default:s(()=>[a(k,{avatar:""},{default:s(()=>[a(L,{src:r.url_image,lazy:"",fit:"cover",style:{height:"50px",width:"50px"},class:"rounded-borders","spinner-color":"amber","spinner-size":"20px"},null,8,["src"])]),_:2},1024),a(k,null,{default:s(()=>[a(w,{lines:"1",class:"font12 text-weight-bold q-mb-sm"},{default:s(()=>[f(o(r.item_name),1)]),_:2},1024),a(w,{class:"font12 text-weight-medium"},{default:s(()=>[r.price[0]?(t(),i(d,{key:0},[r.price[0].discount<=0?(t(),i("span",J,o(r.price[0].size_name)+" "+o(r.price[0].pretty_price),1)):(t(),i("span",K,[f(o(r.price[0].size_name)+" ",1),m("del",null,o(r.price[0].pretty_price),1),f(" "+o(r.price[0].pretty_price_after_discount),1)]))],64)):c("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[D]]),a(z,{inset:""})],64))),128))]),_:1})),a(b,{ref:"item_details",slug:n.slug,money_config:n.money_config,onAfterAdditems:u.afterAdditems},null,8,["slug","money_config","onAfterAdditems"])]),_:1}),h.CartStore.hasData?(t(),p(E,{key:0,reveal:"",class:"bg-white q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark"},{default:s(()=>[a(y,{to:"/cart",loading:h.CartStore.loading,unelevated:"",color:"primary","text-color":"dark","no-caps":"",class:"radius8 full-width"},{default:s(()=>[m("div",W,[m("div",Y,[a(A,{square:"",size:"24px",color:"amber-2","text-color":"dark",class:"text-weight-bold rounded-borders"},{default:s(()=>[h.CartStore.data?(t(),i(d,{key:0},[f(o(h.CartStore.data.items_count),1)],64)):c("",!0)]),_:1})]),Z,m("div",$,[h.CartStore.data?(t(),i(d,{key:0},[f(o(h.CartStore.data.data.subtotal.value),1)],64)):c("",!0)])])]),_:1},8,["loading"])]),_:1})):c("",!0)],64)}var he=q(j,[["render",ee]]);export{he as default};
