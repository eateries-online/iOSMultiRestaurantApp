import{bY as S,a6 as _,p as x,S as y,_ as w,P as k,X as D}from"./index.30bcee2d.js";/**
 * Vue Number Format 3.2.0
 * (c) 2021-2022 Dipak Sarkar <hello@dipaksarkar.in> (https://dipaksarkar.in/)
 * @license MIT
 */var d={prefix:"",suffix:"",separator:",",decimal:".",precision:2,minimumFractionDigits:!1,prefill:!0,reverseFill:!1,min:!1,max:!1,nullValue:""};function b(e=d){this.options=Object.assign(d,e),this.input="",this.number="",this.isClean=!0,this.isNull=(n=this.input)=>this.isClean?!this.numberOnly(n,new RegExp("[^0-9]+","gi")):!this.numberOnly(n,new RegExp("[^0-9\\-]+","gi")),this.clean=(n=!1)=>(this.isClean=n,this),this.sign=()=>this.isClean?this.input.toString().indexOf("-")>=0&&this.realNumber()>0?"-":"":this.input.toString().indexOf("-")>=0?"-":"";function t(n,i,r){return Math.max(n,Math.min(i,r))}function s(n){return t(0,n,20)}function a(n,i){var r=Math.pow(10,i),o=parseFloat(n)/r||0;return o.toFixed(s(i))}this.toNumber=n=>Number(n),this.numberOnly=(n,i)=>n==null?void 0:n.toString().replace(i,""),this.isNegative=this.sign()==="-",this.numbers=()=>(this.options.reverseFill?this.number=a(this.numberOnly(this.input,/\D+/g),this.options.precision).replace(".",this.options.decimal):typeof this.input=="number"?this.number=this.parts(this.input.toString().replace("-",""),".").join(this.options.decimal):(this.number=this.numberOnly(this.input,new RegExp(`[^0-9\\${this.options.decimal}]+`,"gi")),this.number=this.parts(this.number).join(this.options.decimal)),this.number),this.realNumber=()=>this.numbers().toString().replace(this.options.decimal,"."),this.parts=(n="",i=this.options.decimal)=>{var r=n.toString().split(i);if(r.length>1&&(r[0]=this.toNumber(r[0])||0,r[1]=r.slice(1,r.length).join(""),r=r.slice(0,2)),this.isClean){const o=this.toNumber(r.join(".")).toFixed(this.options.precision),u=this.toNumber(o),m=u.toFixed(this.options.minimumFractionDigits);this.options.minimumFractionDigits&&this.options.minimumFractionDigits>=0&&u.toString().length<m.length?r=m.toString().split("."):r=u.toString().split(".")}return r.slice(0,2)},this.addSeparator=()=>{var n=this.numbers().split(this.options.decimal);return n[0]=n[0].toString().replace(/(\d)(?=(?:\d{3})+\b)/gm,`$1${this.options.separator}`),n.join(this.options.decimal)},this.format=(n="")=>(this.input=n,this.isNull()&&!this.options.reverseFill?this.options.nullValue:this.sign()+this.options.prefix+this.addSeparator()+this.options.suffix),this.unformat=(n="")=>(this.input=n,this.isNull()&&!this.options.reverseFill?this.options.nullValue:this.sign()+this.realNumber())}const c="__input-facade__";function E(e){return JSON.parse(JSON.stringify(e))}function N(){return new CustomEvent("input",{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function O(){return new CustomEvent("change",{bubbles:!0,cancelable:!0,detail:{facade:!0}})}function g(e){const t=e instanceof HTMLInputElement?e:e.querySelector("input");if(!t)throw new Error("facade directive requires an input element");return t}function V(e,t){const s=()=>{e.setSelectionRange(t,t)};s(),setTimeout(s(),1)}function h(e,t,{emit:s=!0,force:a=!1,clean:n=!1}={}){const{config:i}=e[c];let{oldValue:r}=e[c],o=t&&t.props?t.props.value:e.value;if(a||r!==o){const u=new b(i).clean(n&&!i.reverseFill);let m=u.format(o),p=u.clean(!i.reverseFill).unformat(o);return n&&(Number(i.max)&&p>Number(i.max)?(m=u.format(i.max),p=u.unformat(i.max)):Number(i.min)&&p<Number(i.min)&&(m=u.format(i.min),p=u.unformat(i.min))),e[c].oldValue=m,e.unmaskedValue=p,e.value!==m&&(e.value=m),s&&e.dispatchEvent(N())}}function C(e){const{target:t,detail:s}=e;if(s!=null&&s.facade)return!1;e.stopPropagation();let a=t.value.length-t.selectionEnd;const{oldValue:n,config:i}=t[c];h(t,null,{emit:!1}),a=Math.max(a,i.suffix.length),a=t.value.length-a,a=Math.max(a,i.prefix.length),V(t,a),n!==t.value&&t.dispatchEvent(N())}function $(e){const{target:t,detail:s}=e;if(s!=null&&s.facade)return!1;const{oldValue:a}=t[c];h(t,null,{force:!0,emit:!0,clean:!0}),a!==t.value&&t.dispatchEvent(O())}const f=c;var F={beforeMount:(e,{value:t,modifiers:s},a)=>{e=g(e);const n=Object.assign({},E(d),t,s);e[f]={config:n},h(e,a,{force:n.prefill,clean:!0})},mounted:e=>{e=g(e);const t=e[f],{config:s}=t,a=e.parentElement||e,n=i=>{i.target===e&&C(i)};a.addEventListener("input",n,!0),e.onblur=i=>$(i),e.onkeydown=i=>{if(([110,190].includes(i.keyCode)||i.key===s.decimal)&&e.value.includes(s.decimal))i.preventDefault();else if([8].includes(i.keyCode)){const r=e.value.slice(e.selectionEnd-1,e.selectionEnd),o=e.value.slice(e.selectionEnd-2,e.selectionEnd);if(r===s.separator){i.preventDefault();let u=e.value.length-e.selectionEnd;e.value=e.value.replace(o,""),u=Math.max(u,s.suffix.length),u=e.value.length-u,u=Math.max(u,s.prefix.length),V(e,u),e.dispatchEvent(new Event("input"))}else[s.prefix,"-"].includes(r)&&(i.preventDefault(),e.value="",e.dispatchEvent(new Event("input")))}},t.cleanup=()=>a.removeEventListener("input",n,!0)},updated:(e,{value:t,oldValue:s,modifiers:a},n)=>{if(e=g(e),t!==s){const{config:i}=e[f];e[f].config=Object.assign({},i,t,a),h(e,n,{force:!0,clean:!0})}else h(e,n)},unmounted:e=>{g(e)[f].cleanup()}};const l=E(d);var v={name:"Number",props:{modelValue:{required:!0},nullValue:{type:[Number,String],default:()=>l.nullValue},masked:{type:Boolean,default:!1},reverseFill:{type:Boolean,default:l.reverseFill},prefill:{type:Boolean,default:l.prefill},precision:{type:Number,default:()=>l.precision},minimumFractionDigits:{type:[Number,Boolean],default:()=>l.minimumFractionDigits},decimal:{type:String,default:()=>l.decimal},min:{type:[Number,Boolean],default:()=>l.min},max:{type:[Number,Boolean],default:()=>l.max},separator:{type:String,default:()=>l.separator},prefix:{type:String,default:()=>l.prefix},suffix:{type:String,default:()=>l.suffix}},directives:{number:F},emits:["update:model-value","input:model-value"],data(){return{maskedValue:this.modelValue,unmaskedValue:null}},methods:{input({target:e}){this.maskedValue=e.value,this.unmaskedValue=e.unmaskedValue,this.$emit("input:model-value",this.emittedValue)},change(){this.$emit("update:model-value",this.emittedValue)}},computed:{emittedValue(){return this.masked?this.maskedValue:this.unmaskedValue},config(){const e={};return Object.keys(this.$props).filter(t=>t!=="modelValue").forEach(t=>{e[t]=this.$props[t]}),e}},watch:{modelValue(e){this.unmaskedValue!==e&&(this.maskedValue=e)}}};const j=["value"];function M(e,t,s,a,n,i){const r=S("number");return _((x(),y("input",{type:"text",autocomplete:"off",value:n.maskedValue,onChange:t[0]||(t[0]=(...o)=>i.change&&i.change(...o)),onInput:t[1]||(t[1]=(...o)=>i.input&&i.input(...o)),class:"v-number"},null,40,j)),[[r,i.config]])}v.render=M;v.__file="src/component.vue";const B={install(e,t={}){t&&Object.assign(d,t),e.directive("number",F),e.component("number",v)}};typeof window!="undefined"&&window.Vue&&window.Vue.use(B);const I={name:"NumberFormat",props:["amount","money_config"],data(){return{total:0,number:void 0}},created(){typeof this.money_config=="undefined"||this.money_config===null||this.money_config===""||this.money_config==="null"||this.money_config==="undefined"?this.number=new b(this.DataStore.money_config):this.number=new b(this.money_config),this.total=this.number.format(this.amount)},watch:{money_config(e,t){},amount(e,t){this.total=this.number.format(e)}},setup(){return{DataStore:k()}}};function R(e,t,s,a,n,i){return x(),y("span",null,D(n.total),1)}var H=w(I,[["render",R]]);export{H as default};
