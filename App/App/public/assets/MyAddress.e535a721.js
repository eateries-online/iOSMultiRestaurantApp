import{_ as q,l as v,P as w,m as n,n as S,p as d,q as m,s as a,f as s,V as u,a2 as h,X as o,a3 as c,S as p,R as _,a4 as $,a5 as C,F as k,U as D,t as I,Y as T,a6 as L,a7 as P,a8 as R,a9 as V,aw as B}from"./index.30bcee2d.js";import{Q as z}from"./QToolbarTitle.80059bbe.js";import{Q as N}from"./QToolbar.8b90f7d3.js";import{Q as x}from"./QHeader.b4bada8e.js";import{Q as E}from"./QInnerLoading.1dad5a80.js";import{Q as g}from"./QItemLabel.b935a34d.js";import{Q as F}from"./QSlideItem.4ba6d61d.js";import{Q as M}from"./QList.d8ad41f7.js";import{Q as O}from"./QFooter.f2cd3c2a.js";import{Q as Y}from"./QPage.f04658ef.js";import{Q as H}from"./QPullToRefresh.e8308158.js";import{u as U}from"./ClientStore.5dffc3bb.js";import"./QResizeObserver.3c3b4a7a.js";import"./use-cache.b0833c75.js";import"./touch.3df10340.js";import"./selection.c88e3f6c.js";import"./format.2bc25e5f.js";const X={name:"MyAddress",components:{AddressDetails:v(()=>I(()=>import("./AddressDetails.e50d9809.js"),["assets/AddressDetails.e50d9809.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QToolbarTitle.80059bbe.js","assets/QToolbar.8b90f7d3.js","assets/QSpace.274cde1f.js","assets/QSelect.a5140148.js","assets/QChip.9a5e9391.js","assets/QItemLabel.b935a34d.js","assets/QMenu.3f2e45b1.js","assets/selection.c88e3f6c.js","assets/rtl.b51694b1.js","assets/format.2bc25e5f.js","assets/QBtnToggle.c946cab5.js","assets/QBtnGroup.d73b976b.js","assets/QFooter.f2cd3c2a.js","assets/QResizeObserver.3c3b4a7a.js","assets/QForm.ab8a2cd2.js","assets/ClosePopup.da855ff7.js","assets/MapStore.d39bcab1.js"]))},data(){return{data:[],loading:!1,inner_loading:!1,location_data:[]}},setup(){const e=w(),t=U();return{DataStore:e,ClientStore:t}},computed:{hasData(){return this.data.length>0}},created(){this.getAddresses()},methods:{deleteAdress(e,t){this.deleteAddress(t.address_uuid,e)},refresh(e){this.getAddresses(e)},getAddresses(e){n.empty(e)&&(this.loading=!0),n.getAddresses().then(t=>{this.data=t.details.data}).catch(t=>{this.data=[]}).then(t=>{this.loading=!1,n.empty(e)||e()})},deleteAddress(e,t){this.inner_loading=!0,n.deleteAddress(e).then(f=>{this.data.splice(t,1),this.ClientStore.getAddress()}).catch(f=>{n.notify("negative",f,"error_outline",this.$q)}).then(f=>{this.inner_loading=!1})},editAddress(e){console.debug(e),this.$refs.address_details.location_data=e,this.$refs.address_details.showModal()},afterSaveaddress(){console.debug("afterSaveaddress"),this.getAddresses()}}},j={key:1,class:"full-width text-center"},G={class:"text-h5 text-weight-bold line-normal"},J={class:"text-grey font12 no-margin"},K={class:"text-weight-medium"};function W(e,t,f,b,i,l){const y=S("AddressDetails");return d(),m(H,{onRefresh:l.refresh},{default:a(()=>[s(x,{reveal:"","reveal-offset":"50",class:c({"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode})},{default:a(()=>[s(N,null,{default:a(()=>[s(u,{onClick:t[0]||(t[0]=r=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"]),s(z,{class:"text-weight-bold"},{default:a(()=>[h(o(e.$t("Address")),1)]),_:1})]),_:1})]),_:1},8,["class"]),s(Y,{padding:"",class:c(["q-pl-md q-pr-md",{"flex flex-center":!l.hasData&&!i.loading,"row items-stretch ":l.hasData&&!i.loading,"bg-mydark text-white":e.$q.dark.mode,"bg-grey-1 text-dark":!e.$q.dark.mode}])},{default:a(()=>[i.loading?(d(),m(E,{key:0,showing:!0,color:"primary",size:"md","label-class":"dark",class:"transparent"})):!l.hasData&&!i.loading?(d(),p("div",j,[_("div",G,o(e.$t("You don't have address added yet")),1),_("p",J,o(e.$t("Let's change that"))+"! ",1),s(u,{flat:"",color:"blue","no-caps":"",label:e.$t("Add new address"),dense:"",size:"sm",to:{path:"/location/map",query:{url:"/account/my-address"}}},null,8,["label"])])):(d(),p(k,{key:2},[s($,{flat:"",class:c(["radius8 col-12",{"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode}])},{default:a(()=>[s(C,null,{default:a(()=>[s(M,null,{default:a(()=>[(d(!0),p(k,null,D(i.data,(r,A)=>(d(),m(T,{key:r.address_uuid,appear:"","leave-active-class":"animated fadeOut"},{default:a(()=>[s(F,{onAction:Q=>l.deleteAdress(A,r),"right-color":e.$q.dark.mode?"mydark":"white",class:c({"bg-mydark ":e.$q.dark.mode,"bg-white ":!e.$q.dark.mode})},{right:a(()=>[s(u,{unelevated:"",round:"",color:"lightprimary","text-color":"primary",icon:"las la-trash",dense:""})]),default:a(()=>[L((d(),m(R,{onClick:Q=>l.editAddress(r),clickable:"",class:c(["radius10 q-mb-sm",{"border-grey300 ":e.$q.dark.mode,"border-grey":!e.$q.dark.mode}])},{default:a(()=>[s(V,{top:""},{default:a(()=>[s(g,{lines:"1"},{default:a(()=>[_("span",K,o(r.attributes.address_label),1)]),_:2},1024),s(g,{caption:"",lines:"1"},{default:a(()=>[h(o(r.address.address1),1)]),_:2},1024),s(g,{caption:"",lines:"1"},{default:a(()=>[h(o(r.address.formatted_address),1)]),_:2},1024),r.attributes.location_name?(d(),m(g,{key:0,caption:"",lines:"1"},{default:a(()=>[h(o(r.attributes.location_name),1)]),_:2},1024)):B("",!0)]),_:2},1024)]),_:2},1032,["onClick","class"])),[[P]])]),_:2},1032,["onAction","right-color","class"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["class"]),s(O,{reveal:"",class:"bg-grey-1 q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark"},{default:a(()=>[s(u,{loading:i.loading,to:{path:"/location/map",query:{url:"/account/my-address"}},label:e.$t("Add new address"),unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold",size:"lg"},null,8,["loading","label"])]),_:1})],64)),s(y,{ref:"address_details",maps_config:b.DataStore.maps_config,onAfterSaveaddress:l.afterSaveaddress},null,8,["maps_config","onAfterSaveaddress"])]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var pe=q(X,[["render",W]]);export{pe as default};
