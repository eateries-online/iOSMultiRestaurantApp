import{_,bz as b,m as i,as as k,p as d,S as c,f as t,s as a,a3 as g,F as f,q as p,V as u,a2 as y,X as h,aw as q,R as s,aV as m,bA as w}from"./index.30bcee2d.js";import{Q as v}from"./QToolbarTitle.80059bbe.js";import{Q as V}from"./QToolbar.8b90f7d3.js";import{Q}from"./QHeader.b4bada8e.js";import{Q as x}from"./QRating.5482e56d.js";import{Q as $}from"./QUploader.e556bff1.js";import{Q as R}from"./QPage.f04658ef.js";import{Q as z}from"./QFooter.f2cd3c2a.js";import{Q as U}from"./QForm.ab8a2cd2.js";import"./QResizeObserver.3c3b4a7a.js";import"./format.2bc25e5f.js";import"./QCircularProgress.f57ffd5b.js";const T={name:"WriteReview",data(){return{order_uuid:"",loading:!1,upload_api:b.api_base_url+"/interface/uploadReview",rating_value:0,as_anonymous:!1,review_content:"",tags_like:"",tags_not_like:"",upload_images:"",back_url:!1,initial_rate:0,order_id:""}},mounted(){this.order_uuid=this.$route.query.order_uuid,this.back_url=this.$route.query.back_url,this.initial_rate=this.$route.query.rate,this.initial_rate>0&&(this.rating_value=this.initial_rate),this.order_id=this.$route.query.order_id},methods:{onRejectedFiles(e){i.notify("negative",`${e.length} file(s) did not pass validation constraints`,"error_outline",this.$q)},getToken(){return k.getToken()},onSubmit(){const e={order_uuid:this.order_uuid,review_content:this.review_content,rating_value:this.rating_value,as_anonymous:this.as_anonymous,tags_like:[this.tags_like],tags_not_like:[this.tags_not_like],upload_images:this.upload_images};this.loading=!0,i.addReview(e).then(o=>{i.notify("green",o.msg,"check",this.$q),this.back_url?this.$router.push(this.back_url):this.$router.push({path:"/account/trackorder",query:{order_uuid:this.order_uuid}})}).catch(o=>{i.notify("dark",o,"error",this.$q)}).then(o=>{this.loading=!1})},afterUploaded(e){const o=JSON.parse(e.xhr.responseText);o.code===1?this.upload_images=o.details:i.notify("dark",o.msg,"error",this.$q)}}},S={key:0},F={class:"q-mb-md"},W=s("h6",{class:"text-weight-bold no-margin q-pb-sm"},"What did you like?",-1),j=s("h6",{class:"text-weight-bold no-margin q-pb-sm"},"What did you not like?",-1),A=s("h6",{class:"text-weight-bold no-margin q-pb-sm"},"Add Photos",-1),B=s("h6",{class:"text-weight-bold no-margin q-pb-sm"},"Write your review",-1),C={class:"q-pb-sm"};function N(e,o,P,D,l,n){return d(),c(f,null,[t(Q,{reveal:"","reveal-offset":"50",class:g({"bg-mydark text-white":e.$q.dark.mode,"bg-white text-black":!e.$q.dark.mode})},{default:a(()=>[t(V,{class:"text-dark"},{default:a(()=>[l.back_url?(d(),p(u,{key:0,onClick:o[0]||(o[0]=r=>e.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:e.$q.dark.mode?"white":"dark"},null,8,["color"])):(d(),p(u,{key:1,to:`/account/trackorder?order_uuid=${l.order_uuid}`,rounded:"",unelevated:"",color:"white","text-color":"dark",icon:"eva-arrow-back-outline",dense:"","no-caps":""},null,8,["to"])),t(v,{class:g(["text-darkx text-weight-bold",{"text-white":e.$q.dark.mode,"text-dark":!e.$q.dark.mode}])},{default:a(()=>[y(h(e.$t("Write Review"))+" ",1),l.order_id?(d(),c("span",S,"#"+h(l.order_id),1)):q("",!0)]),_:1},8,["class"])]),_:1})]),_:1},8,["class"]),t(U,{onSubmit:n.onSubmit},{default:a(()=>[t(R,{class:"q-pl-md q-pr-md",padding:""},{default:a(()=>[s("div",F,[t(x,{modelValue:l.rating_value,"onUpdate:modelValue":o[1]||(o[1]=r=>l.rating_value=r),size:"md",max:5,color:e.$q.dark.mode?"white":"grey-5","color-selected":"primary",class:"q-mb-xs"},null,8,["modelValue","color"])]),W,t(m,{modelValue:l.tags_like,"onUpdate:modelValue":o[2]||(o[2]=r=>l.tags_like=r),label:"Describe in few words",outlined:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[r=>r.length<=50||"Please use maximum 50 characters"]},null,8,["modelValue","bg-color","label-color","rules"]),j,t(m,{modelValue:l.tags_not_like,"onUpdate:modelValue":o[3]||(o[3]=r=>l.tags_not_like=r),label:"Describe in few words",outlined:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[r=>r.length<=50||"Please use maximum 50 characters"]},null,8,["modelValue","bg-color","label-color","rules"]),A,t($,{url:l.upload_api,label:"Drop files here to upload",color:e.$q.dark.mode?"grey600":"secondary","text-color":e.$q.dark.mode?"grey300":"white","no-thumbnails":"",class:"full-width q-mb-md",flat:"",accept:".jpg, image/*",bordered:"","auto-upload":"","max-total-size":"1048576",onRejected:n.onRejectedFiles,headers:[{name:"Authorization",value:`token ${this.getToken()}`}],"field-name":"file",onUploaded:n.afterUploaded},null,8,["url","color","text-color","onRejected","headers","onUploaded"]),B,t(m,{modelValue:l.review_content,"onUpdate:modelValue":o[4]||(o[4]=r=>l.review_content=r),outlined:"",autogrow:"","lazy-rules":"","bg-color":e.$q.dark.mode?"grey600":"input","label-color":e.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[r=>r&&r.length>0||"This field is required"]},null,8,["modelValue","bg-color","label-color","rules"]),s("div",C,[t(w,{modelValue:l.as_anonymous,"onUpdate:modelValue":o[5]||(o[5]=r=>l.as_anonymous=r),size:"sm",color:"secondary",label:"post review as anonymous"},null,8,["modelValue"])])]),_:1}),t(z,{class:"bg-white q-pl-md q-pr-md q-pb-sm q-pt-sm text-dark"},{default:a(()=>[t(u,{type:"submit",unelevated:"",color:"primary","text-color":"white","no-caps":"",class:"full-width",loading:l.loading,style:{"letter-spacing":"2px"},label:"Add Review",size:"lg"},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])],64)}var ee=_(T,[["render",N]]);export{ee as default};
