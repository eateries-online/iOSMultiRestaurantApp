import{_,P as k,m as d,as as y,p as q,S as V,f as r,s as t,a3 as Q,F as S,V as m,a2 as p,X as i,R as b,aV as a,a8 as h,bc as $,bd as v,a9 as f,ap as c}from"./index.30bcee2d.js";import{Q as I}from"./QToolbarTitle.80059bbe.js";import{Q as F}from"./QToolbar.8b90f7d3.js";import{Q as T}from"./QHeader.b4bada8e.js";import{Q as U}from"./QImg.4e876ad6.js";import{Q as C}from"./QItemLabel.b935a34d.js";import{Q as z}from"./QSelect.a5140148.js";import{Q as P}from"./QForm.ab8a2cd2.js";import{Q as D}from"./QPage.f04658ef.js";import{u as B}from"./ClientStore.5dffc3bb.js";import"./QResizeObserver.3c3b4a7a.js";import"./QChip.9a5e9391.js";import"./QMenu.3f2e45b1.js";import"./selection.c88e3f6c.js";import"./rtl.b51694b1.js";import"./format.2bc25e5f.js";const N={name:"SignupPage",data(){return{loading:!1,field_type:"password",field_type1:"password",first_name:"",last_name:"",email_address:"",password:"",cpassword:"",mobile_number:"",mobile_prefix:"",options:[],inner_loading:!1}},setup(){const l=k(),o=B();return{DataStore:l,ClientStore:o}},computed:{FieldIcon(){return this.field_type==="password"?"eva-eye-outline":"eva-eye-off-outline"},FieldIcon1(){return this.field_type1==="password"?"eva-eye-outline":"eva-eye-off-outline"}},watch:{DataStore:{immediate:!0,deep:!0,handler(l,o){Object.keys(l.phone_default_data).length>0&&(this.mobile_prefix="+"+l.phone_default_data.phonecode)}}},methods:{onSubmit(){const l={first_name:this.first_name,last_name:this.last_name,email_address:this.email_address,password:this.password,cpassword:this.cpassword,mobile_prefix:this.mobile_prefix,mobile_number:this.mobile_number,local_id:d.getStorage("place_id")};this.loading=!0,d.registerUser(l).then(o=>{if(o.details.verify)this.$router.push({path:"/account/verify",query:{uuid:o.details.uuid,msg:o.msg}});else{y.setUser(o.details.user_data),y.setToken(o.details.user_token),this.ClientStore.user_settings=o.details.user_settings;const n=d.getStorage("place_id");typeof n!="undefined"&&n!==null?this.$router.push("/home"):this.$router.push("/location")}}).catch(o=>{d.notify("dark",o,null,this.$q)}).then(o=>{this.loading=!1})}}},A={class:"full-width q-pa-md"},E={class:"text-weight-bold"},L={class:"text-weight-medium q-ma-none"};function R(l,o,n,w,s,u){return q(),V(S,null,[r(T,{reveal:"","reveal-offset":"50",class:Q({"bg-mydark text-white":l.$q.dark.mode,"bg-white text-dark":!l.$q.dark.mode})},{default:t(()=>[r(F,null,{default:t(()=>[r(m,{onClick:o[0]||(o[0]=e=>l.$router.back()),flat:"",round:"",dense:"",icon:"las la-angle-left",class:"q-mr-sm",color:l.$q.dark.mode?"white":"dark"},null,8,["color"]),r(I,{class:"text-weight-bold"},{default:t(()=>[p(i(l.$t("Sigin Up")),1)]),_:1})]),_:1})]),_:1},8,["class"]),r(D,{padding:"",class:"flex flex-center"},{default:t(()=>[b("div",A,[b("h5",E,i(l.$t("Create Account")),1),b("p",L,i(l.$t("Enter your name, email and password for signup"))+". ",1),r(m,{flat:"",label:l.$t("Already have an account?"),"no-caps":"",class:"q-pa-none text-weight-bold min-height q-mb-md",color:"secondary",to:"/user/login"},null,8,["label"]),r(P,{onSubmit:u.onSubmit},{default:t(()=>[r(a,{modelValue:s.first_name,"onUpdate:modelValue":o[1]||(o[1]=e=>s.first_name=e),label:l.$t("First name"),outlined:"","lazy-rules":"","bg-color":l.$q.dark.mode?"grey600":"input","label-color":l.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},null,8,["modelValue","label","bg-color","label-color","rules"]),r(a,{modelValue:s.last_name,"onUpdate:modelValue":o[2]||(o[2]=e=>s.last_name=e),label:l.$t("Last name"),outlined:"","lazy-rules":"","bg-color":l.$q.dark.mode?"grey600":"input","label-color":l.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},null,8,["modelValue","label","bg-color","label-color","rules"]),r(a,{modelValue:s.email_address,"onUpdate:modelValue":o[3]||(o[3]=e=>s.email_address=e),label:l.$t("Email address"),outlined:"","lazy-rules":"","bg-color":l.$q.dark.mode?"grey600":"input","label-color":l.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},null,8,["modelValue","label","bg-color","label-color","rules"]),r(a,{modelValue:s.mobile_number,"onUpdate:modelValue":o[5]||(o[5]=e=>s.mobile_number=e),mask:"##############",outlined:"","lazy-rules":"","bg-color":l.$q.dark.mode?"grey600":"input","label-color":l.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},{prepend:t(()=>[r(z,{dense:"",modelValue:s.mobile_prefix,"onUpdate:modelValue":o[4]||(o[4]=e=>s.mobile_prefix=e),options:w.DataStore.phone_prefix_data,onFilter:l.filterFn,behavior:"dialog","input-debounce":"700",style:{border:"none"},"emit-value":"",borderlessx:"",class:"myq-field"},{option:t(({itemProps:e,opt:g})=>[r(h,$(v(e)),{default:t(()=>[r(f,{avatar:""},{default:t(()=>[r(U,{src:g.flag,style:{height:"15px","max-width":"20px"}},null,8,["src"])]),_:2},1024),r(f,null,{default:t(()=>[r(C,null,{default:t(()=>[p(i(g.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":t(()=>[r(h,null,{default:t(()=>[r(f,{class:"text-grey"},{default:t(()=>[p(i(l.$t("No results")),1)]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"])]),_:1},8,["modelValue","bg-color","label-color","rules"]),r(a,{modelValue:s.password,"onUpdate:modelValue":o[7]||(o[7]=e=>s.password=e),type:s.field_type,label:l.$t("Password"),outlined:"","lazy-rules":"","bg-color":l.$q.dark.mode?"grey600":"input","label-color":l.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},{append:t(()=>[r(c,{onClick:o[6]||(o[6]=e=>s.field_type=s.field_type=="password"?"text":"password"),name:u.FieldIcon,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","label","bg-color","label-color","rules"]),r(a,{type:s.field_type1,modelValue:s.cpassword,"onUpdate:modelValue":o[9]||(o[9]=e=>s.cpassword=e),label:l.$t("Confirm Password"),outlined:"","lazy-rules":"","bg-color":l.$q.dark.mode?"grey600":"input","label-color":l.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless",rules:[e=>e&&e.length>0||this.$t("This field is required")]},{append:t(()=>[r(c,{onClick:o[8]||(o[8]=e=>s.field_type1=s.field_type1=="password"?"text":"password"),name:u.FieldIcon1,color:"grey",class:"cursor-pointer"},null,8,["name"])]),_:1},8,["type","modelValue","label","bg-color","label-color","rules"]),r(m,{loading:s.loading,type:"submit",label:l.$t("Sign Up"),unelevated:"","no-caps":"",color:"primary text-white",class:"full-width text-weight-bold",size:"lg"},null,8,["loading","label"])]),_:1},8,["onSubmit"])])]),_:1})],64)}var se=_(N,[["render",R]]);export{se as default};
