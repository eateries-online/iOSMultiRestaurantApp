import{u as H,_ as $,l as _,m as G,P as X,r as i,aU as Y,w as C,o as J,as as N,n as p,p as s,q as y,s as c,f as o,S as d,a3 as v,aV as z,ap as D,aw as E,R as n,a2 as K,X as u,V,F as q,U,t as h}from"./index.30bcee2d.js";import{Q as W}from"./QToolbar.8b90f7d3.js";import{u as Z,a as ee}from"./use-page-sticky.73584e0a.js";import{Q as B}from"./QSpace.274cde1f.js";import{Q as g}from"./QSkeleton.8077f081.js";import{Q as te}from"./QTab.9fbd659e.js";import{Q as ae}from"./QTabs.3876ad2a.js";import{Q as oe,a as se}from"./QTabPanels.4c083028.js";import{Q as re}from"./QPage.f04658ef.js";import{Q as le}from"./QPullToRefresh.e8308158.js";import{u as ne}from"./DeliverySched.7aa22819.js";import{u as ie}from"./PlaceStore.c2f2bb5a.js";import"./QResizeObserver.3c3b4a7a.js";import"./rtl.b51694b1.js";import"./use-panel.f723744b.js";import"./touch.3df10340.js";import"./selection.c88e3f6c.js";import"./use-cache.b0833c75.js";import"./format.2bc25e5f.js";var de=H({name:"QPageSticky",props:Z,setup(t,{slots:a}){const{getStickyContent:w}=ee();return()=>w(a)}});const ce={name:"HomePage",components:{HomeBanner:_(()=>h(()=>import("./HomeBanner.22a90512.js"),["assets/HomeBanner.22a90512.js","assets/swiper.min.b39a1361.css","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QSkeleton.8077f081.js","assets/QImg.4e876ad6.js","assets/swiper-slide.7721ccad.js","assets/CartStore.fe06611f.js"])),CuisineCarousel:_(()=>h(()=>import("./CuisineCarousel.07eeafb1.js"),["assets/CuisineCarousel.07eeafb1.js","assets/swiper.min.b39a1361.css","assets/QSkeleton.8077f081.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/swiper-slide.7721ccad.js"])),BrowseCuisine:_(()=>h(()=>import("./BrowseCuisine.88e5870d.js"),["assets/BrowseCuisine.88e5870d.js","assets/QToolbarTitle.80059bbe.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QSpace.274cde1f.js","assets/QToolbar.8b90f7d3.js"])),MerchantCarousel:_(()=>h(()=>import("./MerchantCarousel.b60231eb.js"),["assets/MerchantCarousel.b60231eb.js","assets/swiper.min.b39a1361.css","assets/QSkeleton.8077f081.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QChip.9a5e9391.js","assets/swiper-slide.7721ccad.js"])),MerchantList:_(()=>h(()=>import("./MerchantList.97216f54.js"),["assets/MerchantList.97216f54.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QList.d8ad41f7.js","assets/QImg.4e876ad6.js","assets/ClosePopup.da855ff7.js"])),MerchantFilter:_(()=>h(()=>import("./MerchantFilter.e9c841b4.js"),["assets/MerchantFilter.e9c841b4.js","assets/QToolbarTitle.80059bbe.js","assets/index.30bcee2d.js","assets/index.aba08127.css","assets/QSpace.274cde1f.js","assets/QToolbar.8b90f7d3.js","assets/QBtnToggle.c946cab5.js","assets/QBtnGroup.d73b976b.js","assets/QPullToRefresh.e8308158.js","assets/touch.3df10340.js","assets/selection.c88e3f6c.js","assets/format.2bc25e5f.js","assets/QFooter.f2cd3c2a.js","assets/QResizeObserver.3c3b4a7a.js","assets/DeliverySched.7aa22819.js"])),NoResults:_(()=>h(()=>import("./NoResults.2631867e.js"),["assets/NoResults.2631867e.js","assets/QImg.4e876ad6.js","assets/index.30bcee2d.js","assets/index.aba08127.css"]))},setup(){const t=G.getStorage("transaction_type"),a=X(),w=i({transaction_type:t}),e=i("popular"),A=i("all"),I=i([]),P=i(""),x=i(1),k=i([]),Q=Y(),m=i(!0),S=i(void 0),F=i(null),r=i(null),f=i(null),T=i([]),M=i(!1),R=ne();C(()=>R.new_transaction_type,(l,L)=>{console.log("DeliveryschedStore=>"+l),R.filters.transaction_type=l,b(R.filters)}),C(()=>R.main_layout_header,(l,L)=>{M.value=!l});const O=ie();C(()=>O.data,(l,L)=>{a.filters.place_id=l.place_id,b(a.filters)}),C(()=>a.list_loading_handle,(l,L)=>{A.value=="all"&&(Object.keys(a.list_data).length>0?m.value=!0:m.value=!1)}),J(()=>{N.authenticated()?T.value=N.getUser():T.value=!1,Object.keys(a.filters).length<=0&&b({transaction_type:t}),Object.keys(a.featured_data).length<=0&&a.getFeaturedList()});const j=l=>{k.value=l},b=l=>{m.value=!0,a.filters=l};return{filters:w,topResto:e,q:P,slide:x,cuisineList:k,afterGetdata:j,applyFilter:b,goSearch:()=>{Q.push("/search")},runFilter:()=>{console.debug("runFilter")},merchantList:F,merchantRefCarousel:r,merchantRefCarousel2:f,featuredTab:A,featured:I,afterResults:l=>{console.log("afterResults =>"+l),m.value=l},hasResult:m,DataStore:a,userData:T,filterAgain:()=>{console.log("filterAgain"),S.value.filter=!0},merchant_filter:S,refresh:l=>{a.getBanner(),a.CuisineList(),a.getFeaturedList(),b({transaction_type:t}),setTimeout(()=>{l()},1e3)},isSticky:M,PlaceStore:O}}},ue={class:"text-weight-bold q-ma-none"},me={key:0,class:"text-secondary"},fe={key:1,class:"text-secondary"},_e={class:"text-weight-medium q-ma-none"},pe={class:"q-mt-md"},he={key:0,class:"row justify-between"},ye={key:1,class:"row"},ge={class:"col"},ke={class:"text-h5 text-weight-medium"},be={class:"col text-right"},ve={class:"q-mt-sm q-mb-xs"},qe={key:0,class:"row justify-between"},we={key:0,class:"row"},Se={class:"col"},Re={class:"text-h5 text-weight-medium"},Ce={class:"col text-right"},De={class:"q-mt-sm q-mb-xs"},Ve={key:0,class:"row justify-between"},Ae={key:0,class:"row"},Pe={class:"col"},xe={class:"text-h5 text-weight-medium"},Qe={class:"col text-right"},Fe={class:"text-center q-pa-sm"};function Te(t,a,w,e,A,I){const P=p("HomeBanner"),x=p("CuisineCarousel"),k=p("MerchantCarousel"),Q=p("MerchantList"),m=p("NoResults"),S=p("MerchantFilter"),F=p("BrowseCuisine");return s(),y(le,{onRefresh:e.refresh},{default:c(()=>[o(re,{padding:"",class:v(["q-pl-md q-pr-md",{"flex flex-center":!e.hasResult}])},{default:c(()=>[e.hasResult?(s(),d(q,{key:0},[e.isSticky?(s(),y(de,{key:0,expand:"",position:"top",class:"z-top"},{default:c(()=>[o(W,{class:v(["text-dark q-pl-md q-pr-md q-pt-sm q-pb-sm",{"bg-mydark":t.$q.dark.mode,"bg-white":!t.$q.dark.mode}])},{default:c(()=>[o(z,{modelValue:e.q,"onUpdate:modelValue":a[1]||(a[1]=r=>e.q=r),label:t.$t("Search food and restaurants"),onClick:e.goSearch,readonly:"",outlined:"","lazy-rules":"","bg-color":t.$q.dark.mode?"grey600":"input","label-color":t.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless fit",dense:""},{prepend:c(()=>[o(D,{name:"eva-search-outline",size:"sm"})]),append:c(()=>[o(D,{name:"tune",class:"cursor-pointer",onClick:a[0]||(a[0]=r=>this.$refs.merchant_filter.filter=!0),size:"sm"})]),_:1},8,["modelValue","label","onClick","bg-color","label-color"])]),_:1},8,["class"])]),_:1})):E("",!0),n("h5",ue,[K(u(t.$t("Hello"))+", ",1),e.userData?(s(),d("span",me,u(e.userData.first_name),1)):(s(),d("span",fe,u(t.$t("Guest")),1))]),n("p",_e,u(t.$t("Find your delicious dish")),1),o(B,{class:"q-pa-xs"}),o(z,{modelValue:e.q,"onUpdate:modelValue":a[3]||(a[3]=r=>e.q=r),label:t.$t("Search food and restaurants"),onClick:e.goSearch,readonly:"",outlined:"","lazy-rules":"","bg-color":t.$q.dark.mode?"grey600":"input","label-color":t.$q.dark.mode?"grey300":"grey",borderless:"",class:"input-borderless"},{prepend:c(()=>[o(D,{name:"eva-search-outline",size:"sm"})]),append:c(()=>[o(D,{name:"tune",class:"cursor-pointer",onClick:a[2]||(a[2]=r=>this.$refs.merchant_filter.filter=!0),size:"sm"})]),_:1},8,["modelValue","label","onClick","bg-color","label-color"]),o(B,{class:"q-pa-sm"}),o(P,{ref:"home_banner"},null,512),n("div",pe,[e.DataStore.loading_cuisine?(s(),d("div",he,[o(g,{type:"text",style:{width:"100px"}}),o(g,{type:"text",style:{width:"50px"}})])):(s(),d("div",ye,[n("div",ge,[n("div",ke,u(t.$t("Explore Cuisine")),1)]),n("div",be,[o(V,{flat:"",color:t.$q.dark.mode?"grey300":"secondary",label:t.$t("Show All"),"no-caps":"",class:"text-weight-600",dense:"",onClick:a[4]||(a[4]=r=>this.$refs.browse_cuisine.modal=!this.$refs.browse_cuisine.modal)},null,8,["color","label"])])]))]),o(x,{ref:"cuisine_carousel",design:1,onAfterGetdata:e.afterGetdata,class:"q-pt-sm q-pb-md"},null,8,["onAfterGetdata"]),n("div",ve,[e.DataStore.car_loading[0]?(s(),d("div",qe,[o(g,{type:"text",style:{width:"100px"}}),o(g,{type:"text",style:{width:"50px"}})])):(s(),d(q,{key:1},[e.DataStore.hasCarData(0)?(s(),d("div",we,[n("div",Se,[n("div",Re,u(t.$t("Popular Near You")),1)]),n("div",Ce,[o(V,{to:{name:"feed",query:{query:"featured",featured_id:e.topResto}},flat:"",color:t.$q.dark.mode?"grey300":"secondary",label:t.$t("Show All"),"no-caps":"",class:"text-weight-600",dense:""},null,8,["to","color","label"])])])):E("",!0)],64))]),o(k,{ref:"merchantRefCarousel",list_type:"featured",featured_id:e.topResto,filters:e.DataStore.filters,index:0},null,8,["featured_id","filters"]),n("div",De,[e.DataStore.car_loading[1]?(s(),d("div",Ve,[o(g,{type:"text",style:{width:"100px"}}),o(g,{type:"text",style:{width:"50px"}})])):(s(),d(q,{key:1},[e.DataStore.hasCarData(1)?(s(),d("div",Ae,[n("div",Pe,[n("div",xe,u(t.$t("Recommended")),1)]),n("div",Qe,[o(V,{to:{name:"feed",query:{query:"featured",featured_id:"recommended"}},flat:"",color:t.$q.dark.mode?"grey300":"secondary",label:t.$t("Show All"),"no-caps":"",class:"text-weight-600",dense:""},null,8,["color","label"])])])):E("",!0)],64))]),o(k,{ref:"merchantRefCarousel",list_type:"featured",featured_id:"recommended",filters:e.DataStore.filters,index:1},null,8,["filters"]),o(B,{class:"q-pa-xs"}),o(ae,{modelValue:e.featuredTab,"onUpdate:modelValue":a[5]||(a[5]=r=>e.featuredTab=r),dense:"","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":"","no-caps":"",class:v({"text-grey300":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}),breakpoint:0},{default:c(()=>[(s(!0),d(q,null,U(e.DataStore.featured_data,(r,f)=>(s(),y(te,{key:r,name:f,label:r,"content-class":"text-weight-500 "},null,8,["name","label"]))),128))]),_:1},8,["modelValue","class"]),o(oe,{modelValue:e.featuredTab,"onUpdate:modelValue":a[6]||(a[6]=r=>e.featuredTab=r),animated:"",class:v({"bg-mydark text-white":t.$q.dark.mode,"bg-white text-black":!t.$q.dark.mode})},{default:c(()=>[(s(!0),d(q,null,U(e.DataStore.featured_data,(r,f)=>(s(),y(se,{key:r,name:f,label:r,class:"q-pa-sm"},{default:c(()=>[o(Q,{ref_for:!0,ref:"merchantList",list_type:"featured",featured_id:f,filters:e.DataStore.filters,onAfterResults:e.afterResults},null,8,["featured_id","filters","onAfterResults"]),n("div",Fe,[e.DataStore.hasFeed?(s(),y(V,{key:0,color:t.$q.dark.mode?"grey300":"secondary",to:{path:"feed",query:{query:"featured",featured_id:f}},unelevated:"","no-caps":"",flat:"",dense:"",label:t.$t("Show All")},null,8,["color","to","label"])):(s(),d("div",{key:1,class:v(["font12 q-pa-md",{"text-grey300":t.$q.dark.mode,"text-dark":!t.$q.dark.mode}])},u(t.$t("No Results")),3))])]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue","class"])],64)):(s(),y(m,{key:1,onFilterAgain:e.filterAgain},null,8,["onFilterAgain"])),o(S,{ref:"merchant_filter",cuisine_data:e.DataStore.cuisine,onApplyFilter:e.applyFilter,onRunFilter:e.runFilter},null,8,["cuisine_data","onApplyFilter","onRunFilter"]),o(F,{ref:"browse_cuisine"},null,512)]),_:1},8,["class"])]),_:1},8,["onRefresh"])}var rt=$(ce,[["render",Te]]);export{rt as default};
